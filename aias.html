<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Aias – Werkseite</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="style_aias.css" />
  </head>
  <body>
    <div class="wrap">
      <!-- Kopfzeile -->
      <div class="bar">
        <a class="btn" href="index.html">← Zurück zur Startseite</a>
        <div class="title">Aias <span class="muted">Werkseite</span></div>
      </div>

      <!-- Hinweis -->
      <div class="notice">
        Links: <b>texte/Aias.txt</b> · Unten: <b>Original (links)</b> & <b>Entwurf (rechts)</b> ·
        Rechts oben: eingebettetes PDF (Quelle: <b>Original</b>/<b>Entwurf</b>, Darstellung: <b>Normal</b>/<b>Fett</b>)
      </div>

      <!-- Oben: Grid (links Original, rechts PDF-Viewer) -->
      <div class="grid">
        <!-- Original (links) -->
        <section class="card">
          <h2>Original – Rohtext</h2>
          <div class="pane-body">
            <div class="split">
              <a class="btn" href="texte/Aias.txt" download>Herunterladen (Original.txt)</a>
            </div>
            <object data="texte/Aias.txt" type="text/plain">
              <pre class="src">Konnte texte/Aias.txt nicht laden. Liegt die Datei im Ordner texte/?</pre>
            </object>
          </div>
        </section>

        <!-- PDF-Viewer (rechts) -->
        <section class="card">
          <h2>PDF</h2>
          <div class="pane-body">
            <div class="pdf-controls">
              <!-- Quelle: Original vs. Entwurf -->
              <span class="radio">
                <input type="radio" name="pdfsrc" id="src-original" value="original" checked />
                <label for="src-original">Original</label>
              </span>
              <span class="radio">
                <input type="radio" name="pdfsrc" id="src-draft" value="draft" />
                <label for="src-draft">Entwurf</label>
              </span>

              <!-- Darstellung: Normal vs. Fett -->
              <span class="radio" style="margin-left:12px">
                <input type="radio" name="pdfkind" id="pdf-normal" value="Normal" checked />
                <label for="pdf-normal">Normal</label>
              </span>
              <span class="radio">
                <input type="radio" name="pdfkind" id="pdf-fett" value="Fett" />
                <label for="pdf-fett">Fett</label>
              </span>

              <button class="btn" id="pdf-refresh" title="PDF neu laden">PDF aktualisieren</button>
              <button class="btn" id="pdf-refresh" type="button" title="PDF neu laden">PDF aktualisieren</button>
              <a class="btn" href="pdf/TragödieAias_Normal.pdf" id="pdf-open" target="_blank">Im neuen Tab öffnen</a>

              <span class="muted">Pdf. wird aus dem Entwurf erstellt. Dies kann bis zu zwei Minuten in Anspruch nehmen. Klicken Sie regelmäßig auf „PDF aktualisieren“ um den aktuellen Stand zu überprüfen.</span>
            </div>

            <object id="pdf-frame" class="pdf-frame" type="application/pdf"
              data="pdf/TragödieAias_Normal.pdf#view=FitH">
              <p>PDF kann nicht eingebettet werden.</p>
            </object>
          </div>
        </section>
      </div>

      <!-- Unten: Birkenbihl-TXT ZWEISPALTIG -->
      <section class="card card-wide" style="margin-top:16px">
        <h2>Birkenbihl – Text</h2>

        <div class="small" style="display:flex; align-items:center; gap:10px; margin:6px 0 10px;">
          <span class="save-dot" id="save-dot"></span><span id="save-text" class="small">Bereit</span>
          <span id="draft-status" class="small" style="margin-left:auto"></span>
        </div>

        <!-- ===== bb-grid (zwei Spalten) ===== -->
        <div class="bb-grid">
          <!-- LINKE PANE: ORIGINAL (nur lesen) -->
          <div class="pane">
            <h3>Original</h3>
            <div class="pane-body">

              <!-- Zeile: Download | PDF generieren | Scroll koppeln -->
              <div class="split">
                <button class="btn" id="bb-generate-original" type="button" title="PDF-Quelle oben auf Original stellen und neu laden">PDF generieren</button>
                <button class="btn" id="bb-generate-original" title="PDF-Quelle oben auf Original stellen und neu laden">PDF generieren</button>

                <label class="toggle" id="scroll-link" style="margin-left:auto;">
                  <input type="checkbox" checked />
                  <span>Scroll koppeln:</span>
                  <span class="state on" data-on="An" data-off="Aus">An</span>
                </label>
              </div>

              <!-- Zeile: Doppelschalter ± | Original-Filter rechtsbündig -->
              <div class="split" style="margin-top:-6px">
                <div>
                  <label class="duo-toggle" id="orig-font-toggle">
                    <button type="button" class="duo minus" id="orig-font-minus" aria-label="Schrift kleiner">−</button>
                    <span>Textgröße</span>
                    <button type="button" class="duo plus"  id="orig-font-plus"  aria-label="Schrift größer">+</button>
                  </label>
                </div>
                <div class="toggle-row" style="margin-left:auto;">
                  <label class="toggle" id="orig-toggle-tags">
                    <input type="checkbox" checked />
                    <span>Grammatikkürzel in Übersicht:</span>
                    <span class="state on" data-on="An" data-off="Aus">An</span>
                  </label>
                  <label class="toggle" id="orig-toggle-colors">
                    <input type="checkbox" checked />
                    <span>Farbkürzel in Übersicht:</span>
                    <span class="state on" data-on="An" data-off="Aus">An</span>
                  </label>
                </div>
              </div>

              <pre id="bb-original-pre" class="src srcbox">Lade Original…</pre>
            </div>
          </div>

          <!-- RECHTE PANE: ENTWURF (editierbar / oder Ansicht in derselben Fläche) -->
          <div class="pane">
            <h3>Entwurf</h3>
            <div class="pane-body">

              <!-- Zeile: Download/Upload/Reset/Build -->
              <div class="split">
                <button class="btn" id="bb-download-draft" type="button" title="Aktuellen Entwurf herunterladen (mit eindeutigem Code)">Herunterladen (Entwurf.txt)</button>
                <button class="btn" id="bb-upload-draft"  type="button" title="Entwurf.txt aus Datei laden">Entwurf hochladen</button>
                <input id="bb-upload-file" type="file" accept=".txt,text/plain" style="display:none" />
                <button class="btn" id="bb-reset" type="button" title="Nur den lokalen Entwurf löschen">Entwurf zurücksetzen</button>
                <button class="btn" id="bb-generate-draft" type="button" title="Entwurf als PDF bauen (Cloud-Worker)">PDF generieren</button>
              </div>

              <!-- Zeile: Doppelschalter ± + Entwurf-Filter rechtsbündig -->
              <div class="split" style="margin-top:-6px">
                <div>
                  <label class="duo-toggle" id="draft-font-toggle">
                    <button type="button" class="duo minus" id="draft-font-minus" aria-label="Schrift kleiner">−</button>
                    <span>Textgröße</span>
                    <button type="button" class="duo plus"  id="draft-font-plus"  aria-label="Schrift größer">+</button>
                  </label>
                </div>
                <div class="toggle-row" style="margin-left:auto;">
                  <label class="toggle" id="draft-toggle-tags">
                    <input type="checkbox" checked />
                    <span>Grammatikkürzel in Übersicht:</span>
                    <span class="state on" data-on="An" data-off="Aus">An</span>
                  </label>
                  <label class="toggle" id="draft-toggle-colors">
                    <input type="checkbox" checked />
                    <span>Farbkürzel in Übersicht:</span>
                    <span class="state on" data-on="An" data-off="Aus">An</span>
                  </label>
                </div>
              </div>

              <!-- Editor / Ansicht (dieselbe Fläche, umschaltend) -->
              <textarea id="bb-editor" class="editor" placeholder="Entwurf bearbeiten…"></textarea>
              <pre id="bb-draft-view" class="src srcbox" style="display:none"></pre>
              <div id="draft-view-note" class="small muted" style="display:none; margin-top:6px;">
                Ansichtsmodus (gefiltert). Zum Bearbeiten Schalter wieder auf „An“ stellen.
              </div>
            </div>
          </div>
        </div>
        <!-- ===== /bb-grid ===== -->

        <div class="notice" style="margin-top:10px">
          Der Entwurfsweg lässt das Original in <code>texte/</code> unberührt. Für „offizielle“ PDFs ersetzt du später
          die Originaldatei in <code>texte/</code> und lässt den Haupt-Workflow laufen.
        </div>
      </section>

      <!-- Quellen -->
      <div class="notice" style="margin-top:12px">
        Quelle Originaltexte: Perseus Digital Library · Eigene Aufbereitung: Birkenbihl/Translinear
      </div>
    </div>

    <!-- Bestätigungs-Modal: Entwurf zurücksetzen -->
    <div id="confirm-backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="confirm-title" aria-hidden="true">
      <div class="modal" role="document">
        <div class="modal-header">
          <div id="confirm-title" class="modal-title">Entwurf zurücksetzen?</div>
          <button class="modal-close" id="confirm-close" aria-label="Schließen">×</button>
        </div>
        <div class="modal-body">
          <p>Dieser Schritt wird Ihren Entwurf <b>unwiderruflich löschen</b> und ihn auf den <b>Originalzustand</b> zurücksetzen.</p>
          <p>Falls Sie Ihren Entwurf speichern möchten, klicken Sie auf <b>„Herunterladen (Entwurf.txt)“</b>. Sie können ihn dann auch offline bearbeiten und später neu hochladen.</p>
          <p><b>Wollen Sie mit der Löschung Ihres Entwurfs fortfahren?</b></p>
        </div>
        <div class="modal-actions">
          <button class="btn secondary" id="confirm-cancel">Abbrechen</button>
          <button class="btn danger" id="confirm-ok">Entwurf zurücksetzen</button>
        </div>
      </div>
    </div>

    <!-- Modal: PDF-Optionen -->
    <div id="opt-backdrop" class="opt-backdrop" role="dialog" aria-modal="true" aria-labelledby="opt-title" aria-hidden="true">
      <div class="opt-modal" role="document">
        <div class="opt-header">
          <div id="opt-title" class="opt-title">PDF-Optionen</div>
          <button class="modal-close" id="opt-close" aria-label="Schließen">×</button>
        </div>
        <div class="opt-body">
          <div class="opt-section">
            <div class="opt-row">
              <label class="opt-check"><input type="checkbox" id="opt-colors" checked /> <span>Farben zeigen</span></label>
              <label class="opt-check"><input type="checkbox" id="opt-tags" checked /> <span>Grammatikürzel zeigen</span></label>
              <div class="muted-note">Tipp: Für Schwarz-Weiß die Farben abwählen; für „reine Birkenbihl“ die Grammatikürzel abwählen.</div>
            </div>
          </div>
          <details class="opt-adv" id="opt-adv">
            <summary>Benutzerdefiniert</summary>
            <div class="opt-section" style="margin-top:10px">
              <div class="opt-row">
                <div><b>Farbregeln (Beispiel, PoS-basiert)</b></div>
                <label class="opt-check"><input type="checkbox" id="opt-color-n" checked /> <span><span class="opt-color-chip chip-red">Substantive (N)</span> rot</span></label>
                <label class="opt-check"><input type="checkbox" id="opt-color-v" checked /> <span><span class="opt-color-chip chip-green">Verben (V)</span> grün</span></label>
                <label class="opt-check"><input type="checkbox" id="opt-color-aj" checked /> <span><span class="opt-color-chip chip-blue">Adjektive/Partizipien (Aj)</span> blau</span></label>
              </div>
            </div>
            <div class="opt-section">
              <div class="opt-row">
                <div><b>Ein-/Ausblenden von Kürzeln</b></div>
                <label class="opt-check"><input type="checkbox" id="tag-Av" checked /> <span>(Av) Adverb</span></label>
                <label class="opt-check"><input type="checkbox" id="tag-Pt" checked /> <span>(Pt) Partikel</span></label>
                <label class="opt-check"><input type="checkbox" id="tag-Ko" checked /> <span>(Ko) Konjunktion</span></label>
                <label class="opt-check"><input type="checkbox" id="tag-Art" checked /> <span>(Art) Artikel</span></label>
                <label class="opt-check"><input type="checkbox" id="tag-Aj" checked /> <span>(Aj) Adjektiv/Partizip</span></label>
                <label class="opt-check"><input type="checkbox" id="tag-V"  checked /> <span>(V) Verb</span></label>
                <label class="opt-check"><input type="checkbox" id="tag-N"  checked /> <span>(N) Nomen/Substantiv</span></label>
                <div class="muted-note">Diese Liste ist ein Auszug. (Vollständige Steuerung folgt im Backend.)</div>
              </div>
            </div>
          </details>
        </div>
        <div class="opt-actions">
          <span class="muted-note" id="opt-context-note"></span>
          <button class="btn secondary" id="opt-cancel">Abbrechen</button>
          <button class="btn" id="opt-generate">PDF generieren</button>
        </div>
      </div>
    </div>

    <script src="utils.js"></script>
    <script src="aias.js"></script>
  </body>
</html>
