<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Werkseite</title>

  <!-- Basis-Stile -->
  <link rel="stylesheet" href="style.css" />
  <!-- Werk-spezifisches Layout -->
  <link rel="stylesheet" href="work.css" />
</head>
<body>
  <!-- ======= Kopf ======= -->
  <header class="topbar">
    <div class="topbar-left">
      <a class="back-link" href="index.html">← Zurück zur Startseite</a>
    </div>
    <div class="topbar-center">
      <h1 id="pageTitle" class="page-title">Autor – Werk</h1>
    </div>
    <div class="topbar-right"></div>
  </header>

  <main class="wrap">
    <!-- kleine Info-Zeile (kannst du löschen, wenn du willst) -->
    <div class="notice small">
      Diese Werkseite ist universell. Sie lädt anhand der URL-Parameter <code>?kind=&amp;author=&amp;work=</code>.
    </div>

    <!-- ======= 2×2-Grid ======= -->
    <section class="grid-2x2">

      <!-- Original-Text (oben links) -->
      <div class="pane">
        <div class="pane-head">
          <div class="pane-title">Original-Text</div>
          <div class="pane-tools">
            <button id="btnOrigPlus" class="btn" title="Schrift größer">A+</button>
            <button id="btnOrigMinus" class="btn" title="Schrift kleiner">A−</button>
          </div>
        </div>
        <div id="origText" class="pane-body mono scroll"></div>
      </div>

      <!-- PDF (oben rechts) -->
      <div class="pane">
        <div class="pane-head">
          <div class="pane-title">PDF</div>
          <div class="pane-tools">
            <a id="btnPdfDownload" class="btn" href="#" download>PDF herunterladen</a>
          </div>
        </div>

        <!-- Schalter: Quelle / Stärke / Farbe / Tags / Versmaß (wird bei Prosa automatisch ohne Versmaß angezeigt) -->
        <div class="option-groups">
          <div class="opt-row">
            <div class="opt-label">Quelle</div>
            <div class="seg">
              <button class="seg-btn" data-opt="source" data-val="original">Original</button>
              <button class="seg-btn" data-opt="source" data-val="draft">Entwurf</button>
            </div>
          </div>

          <div class="opt-row">
            <div class="opt-label">Stärke</div>
            <div class="seg" id="seg-strength">
              <button class="seg-btn" data-opt="strength" data-val="Normal">Normal</button>
              <button class="seg-btn" data-opt="strength" data-val="GR_Fett">Fett</button>
              <button class="seg-btn" data-opt="strength" data-val="DE_Fett">DE-Fett</button>
            </div>
          </div>

          <div class="opt-row">
            <div class="opt-label">Farbe</div>
            <div class="seg">
              <button class="seg-btn" data-opt="color" data-val="Colour">Colour</button>
              <button class="seg-btn" data-opt="color" data-val="BlackWhite">BlackWhite</button>
            </div>
          </div>

          <div class="opt-row">
            <div class="opt-label">Grammatik-Tags</div>
            <div class="seg">
              <button class="seg-btn" data-opt="tags" data-val="Tag">Tags</button>
              <button class="seg-btn" data-opt="tags" data-val="NoTags">NoTag</button>
            </div>
          </div>

          <div class="opt-row" id="opt-meter-row">
            <div class="opt-label">Versmaß</div>
            <div class="seg">
              <button class="seg-btn" data-opt="meter" data-val="with">Versmaß</button>
              <button class="seg-btn" data-opt="meter" data-val="without">Ohne Versmaß</button>
            </div>
          </div>
        </div>

        <div class="pane-body pdf-body">
          <iframe id="pdfFrame" title="PDF-Ansicht" loading="lazy"></iframe>
        </div>
      </div>

      <!-- Birkenbihl-Text (unten links) -->
      <div class="pane">
        <div class="pane-head">
          <div class="pane-title">Birkenbihl-Text</div>
          <div class="pane-tools">
            <button id="btnBirPlus" class="btn" title="Schrift größer">A+</button>
            <button id="btnBirMinus" class="btn" title="Schrift kleiner">A−</button>
          </div>
        </div>
        <div id="birkenbihlText" class="pane-body mono scroll"></div>
      </div>

      <!-- Entwurf → PDF (unten rechts) -->
      <div class="pane">
        <div class="pane-head">
          <div class="pane-title">Entwurf → PDF</div>
          <div class="pane-tools">
            <a id="btnDraftPdfDownload" class="btn" href="#" download>PDF herunterladen</a>
          </div>
        </div>

        <div class="draft-uploader">
          <input id="draftFile" type="file" accept=".txt" />
          <button id="btnRenderDraft" class="btn primary">Entwurf jetzt rendern</button>
          <span class="muted" id="draftStatus">Bereit.</span>
        </div>

        <div class="pane-body pdf-body">
          <iframe id="draftPdfFrame" title="Draft-PDF" loading="lazy"></iframe>
        </div>
      </div>
    </section>
  </main>

  <!-- Globale Utils -->
  <script src="utils.js"></script>
  <!-- Worker-Client & Werk-Logik -->
  <script>
    // Worker Basis (falls abweichend, hier anpassen)
    window.WORKER_BASE = "https://birkenbihl-draft-01.klemp-tobias.workers.dev";
  </script>
  <script src="work.js"></script>
</body>
</html>
